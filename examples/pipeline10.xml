<PIPELINE>
	<MODULE seq="001" name="FILE PROCESSING">
		<FUNCTION name="LOAD FILE">
			<REGEXP>bonbons.jpg</REGEXP>
			<OUTPUT>IMAGE1</OUTPUT>
		</FUNCTION>
	</MODULE>
	<MODULE seq="002" name="FILE PROCESSING">
		<FUNCTION name="NORMALIZE">
			<INPUT>IMAGE1</INPUT>
			<OUTPUT>IMAGE_BODIES</OUTPUT>
			<ASHOW>TRUE</ASHOW>
			<WINDOWSNAME>NULL</WINDOWSNAME>
			<!-- MAXMIN or LOG-->
			<TYPE>MAXMIN</TYPE>
			<MAXINT>1</MAXINT>
			<MININT>0</MININT>
		</FUNCTION>
	</MODULE>
		<MODULE seq="003" name="IMAGE PROCESSING">
		<FUNCTION name="THRESHOLD">
			<INPUT>IMAGE_BODIES</INPUT>
			<THRESHOLD>0.3</THRESHOLD>
			<THRESHOLD_TYPE>THRESH_BINARY_INV</THRESHOLD_TYPE>
			<MAX_THRESHOLD>1</MAX_THRESHOLD>
			<ASHOW>TRUE</ASHOW>
			<WINDOWSNAME>THRESHOLD</WINDOWSNAME>
			<OUTPUT>IMAGE3</OUTPUT>
		</FUNCTION>
	</MODULE>
	<MODULE seq="004" name="IMAGE PROCESSING">
		<FUNCTION name="MAKE BRUSH">
			<ASHOW>FALSE</ASHOW>
			<WINDOWSNAME>MY BRUSH</WINDOWSNAME>
			<BRUSH_SIZE_X>15</BRUSH_SIZE_X>
			<BRUSH_SIZE_Y>15</BRUSH_SIZE_Y>
			<BRUSH_TYPE>ELLIPSE_SHAPE</BRUSH_TYPE>
			<SIGMA>0</SIGMA>
			<OUTPUT>BRUSH NUMBER 1</OUTPUT>
		</FUNCTION>
	</MODULE>
	<MODULE seq="005" name="IMAGE PROCESSING">
		<FUNCTION name="ERODE">
			<ASHOW>TRUE</ASHOW>
			<WINDOWSNAME>EROSION</WINDOWSNAME>
			<INPUT>IMAGE3</INPUT>
			<BRUSH>BRUSH NUMBER 1</BRUSH>
			<ITERATIONS>10</ITERATIONS>
			<OUTPUT>FOREGROUND</OUTPUT>
		</FUNCTION>
	</MODULE>
    <MODULE seq="006" name="IMAGE PROCESSING">
		<FUNCTION name="MAKE BRUSH">
			<ASHOW>FALSE</ASHOW>
			<WINDOWSNAME>MY BRUSH</WINDOWSNAME>
			<BRUSH_SIZE_X>5</BRUSH_SIZE_X>
			<BRUSH_SIZE_Y>5</BRUSH_SIZE_Y>
			<BRUSH_TYPE>ELLIPSE_SHAPE</BRUSH_TYPE>
			<SIGMA>0</SIGMA>
			<OUTPUT>BRUSH NUMBER 2</OUTPUT>
		</FUNCTION>
	</MODULE>
	<MODULE seq="007" name="IMAGE PROCESSING">
		<FUNCTION name="DILATE">
			<ASHOW>TRUE</ASHOW>
			<WINDOWSNAME>FOREGROUND</WINDOWSNAME>
			<INPUT>IMAGE3</INPUT>
			<BRUSH>BRUSH NUMBER 2</BRUSH>
			<ITERATIONS>3</ITERATIONS>
			<OUTPUT>BACKGROUND</OUTPUT>
		</FUNCTION>
	</MODULE>
	<MODULE seq="009" name="SEGMENTATION PROCESSING">
		<FUNCTION name="WATERSHED">
			<FOREGROUND>FOREGROUND</FOREGROUND>
			<BACKGROUND>BACKGROUND</BACKGROUND>
			<INPUT>IMAGE_BODIES</INPUT>
			<OUTPUT>SEGMENT</OUTPUT>
			<SAVE_OBJECTS>OBJECTS</SAVE_OBJECTS>
			<ASHOW>TRUE</ASHOW>
			<WINDOWSNAME>SEGMENTATION by Watershed</WINDOWSNAME>
		</FUNCTION>
	</MODULE>
    <MODULE seq="010" name="FILE PROCESSING">
		<FUNCTION name="PAINT OBJECTS">
			<ASHOW>TRUE</ASHOW>
			<WINDOWSNAME>Painted</WINDOWSNAME>
			<INPUT>IMAGE3</INPUT>
			<COLOUR>RANDOM</COLOUR>
			<THICKNESS>0</THICKNESS>
			<LOAD_OBJECTS>OBJECTS</LOAD_OBJECTS>
			<PAINT_CONTOURS>FALSE</PAINT_CONTOURS>
			<OUTPUT>IMAGEX2</OUTPUT>
			<WIDTH>800</WIDTH>
            <HEIGHT>600</HEIGHT>
		</FUNCTION>
	</MODULE>
</PIPELINE>
